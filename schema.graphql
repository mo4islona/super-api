type Account @entity {
  id: ID!
  totalStake: BigInt
  totalReward: BigInt
  transfers: [Transfer] @derivedFrom(field: "account")
  contributions: [Contribution] @derivedFrom(field: "account")
  rewards: [Reward] @derivedFrom(field: "account")
  stakes: [Stake] @derivedFrom(field: "account")
}

type Parachain @entity {
  id: ID!
  name: String
  crowdloans: [Crowdloan]! @derivedFrom(field: "parachain")
}

enum CrowdloanStatus {
  Created
  Won
  Dissolved
}

type Contributor {
  id: ID!
  amount: BigInt!
}

type Crowdloan @entity {
  id: ID!
  cap: BigInt!
  firstPeriod: BigInt!
  lastPeriod: BigInt!
  end: BigInt!
  contributors: [Contributor!]
  raised: BigInt!
  parachain: Parachain!
  chainName: String! @index
  blockNumber: BigInt
  status: CrowdloanStatus
}

interface Item {
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String
  chainName: String 
}

type Contribution implements Item @entity {
  id: ID!
  chainName: String! @index
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String @index
  crowdloan: Crowdloan
  success: Boolean
  account: Account @index
  amount: BigInt
}

type Transfer implements Item @entity {
  id: ID!
  chainName: String @index
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String @index
  to: Account @index
  from: Account @index
  account: Account @index
  amount: BigInt
  success: Boolean
  name: String
}

type Reward implements Item @entity  {
  id: ID!
  chainName: String @index
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String @index
  account: Account @index
  amount: BigInt
  era: Int
  validator: String
  total: BigInt
  name: String
}

type Stake implements Item @entity  {
  id: ID!
  chainName: String @index
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String @index
  account: Account @index
  amount: BigInt
  total: BigInt
  name: String
}
